(function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(exports):"function"==typeof define&&define.amd?define(["exports"],b):(a=a||self,b(a.dline={}))})(this,function(a){'use strict';var y=Math.ceil,z=Math.max,A=Math.min,B=Math.pow,C=Math.floor,D=Math.acos,E=Math.cos,F=Math.sin,G=Math.abs,H=Math.PI;function b(a,b,c,e){var f=a[0]*H/180,g=b[0]*H/180,h=a[1]*H/180,i=b[1]*H/180,j="Long"===e?G(a[1]-b[1]):"Lat"===e?G(a[0]-b[0]):NaN,d=6372795*D(F(f)*F(g)+E(f)*E(g)*E(h-i));return j*c/d}function c(a,b,c,d,e,f,g){for(var h=Array(b),l=0;l<b;l++)h[l]=Array(c);for(var m,n,o=[],p=0;p<a.length;p++)m=G(g-a[p][1])/e,n=G(f-a[p][0])/d,h[C(n)][C(m)]=a[p][2],o.push([C(n),C(m),a[p][2]]);for(var q=0,r=0,s=0;s<b;s++)for(var t=0;t<c;t++)if(null==h[s][t]){for(var u=0;u<o.length;u++)q+=o[u][2]*(1/B(B(s-o[u][0],2)+B(t-o[u][1],2),2)),r+=1/B(B(s-o[u][0],2)+B(t-o[u][1],2),2);h[s][t]=q/r,q=0,r=0}return h}function d(a,d,e){var f=A.apply(null,a.map(function(a){return a[2]})),g=z.apply(null,a.map(function(a){return a[2]})),h=d[2]-d[0],i=d[3]-d[1],j=b([d[1],d[0]],[d[1],d[2]],e,"Long"),k=b([d[1],d[0]],[d[3],d[0]],e,"Lat"),l=y(h/j),m=y(i/k),n=c(a,m,l,k,j,d[1],d[0]);return{Grid:n,DeltaLat:k,DeltaLong:j,Grid_Min_Lat:d[1],Grid_Min_Long:d[0],Dot_Max_Z:g,Dot_Min_Z:f}}function e(a){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},e(a)}function f(a){return g(a)||h(a)||i()}function g(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}}function h(a){if(Symbol.iterator in Object(a)||"[object Arguments]"===Object.prototype.toString.call(a))return Array.from(a)}function i(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function j(a,b){var c=(a[0]+b[0])/2,d=(a[1]+b[1])/2;return[c,d]}function l(a,b,c){for(var d=[],e=[],f=!0;0<a.length;){!0===f&&(d.push([]),e.push([]),d[d.length-1].push([a[0][0],a[0][1]],[a[0][2],a[0][3]]),.5===a[0][0]||.5===a[0][1]||.5===a[0][2]||.5===a[0][3]||a[0][0]===c||a[0][1]===b||a[0][2]===c||a[0][3]===b?e[e.length-1].push([a[0][0],a[0][1]],[a[0][2],a[0][3]]):e[e.length-1].push(j([a[0][0],a[0][1]],[a[0][2],a[0][3]])),a.splice(0,1)),f=!0;for(var g=0,h=a.length;g<h;g++){if(d[d.length-1][d[d.length-1].length-1][0]===a[g][0]&&d[d.length-1][d[d.length-1].length-1][1]===a[g][1]){d[d.length-1].push([a[g][2],a[g][3]]),.5===a[g][0]||.5===a[g][1]||.5===a[g][2]||.5===a[g][3]||a[g][0]===c||a[g][1]===b||a[g][2]===c||a[g][3]===b?e[e.length-1].push([a[g][2],a[g][3]]):e[e.length-1].push(j([a[g][0],a[g][1]],[a[g][2],a[g][3]])),a.splice(g,1),f=!1;break}else if(d[d.length-1][d[d.length-1].length-1][0]===a[g][2]&&d[d.length-1][d[d.length-1].length-1][1]===a[g][3]){d[d.length-1].push([a[g][0],a[g][1]]),.5===a[g][0]||.5===a[g][1]||.5===a[g][2]||.5===a[g][3]||a[g][0]===c||a[g][1]===b||a[g][2]===c||a[g][3]===b?e[e.length-1].push([a[g][0],a[g][1]]):e[e.length-1].push(j([a[g][0],a[g][1]],[a[g][2],a[g][3]])),a.splice(g,1),f=!1;break}if(d[d.length-1][0][0]===a[g][0]&&d[d.length-1][0][1]===a[g][1]){d[d.length-1].unshift([a[g][2],a[g][3]]),.5===a[g][0]||.5===a[g][1]||.5===a[g][2]||.5===a[g][3]||a[g][0]===c||a[g][1]===b||a[g][2]===c||a[g][3]===b?e[e.length-1].unshift([a[g][2],a[g][3]]):e[e.length-1].unshift(j([a[g][0],a[g][1]],[a[g][2],a[g][3]])),a.splice(g,1),f=!1;break}else if(d[d.length-1][0][0]===a[g][2]&&d[d.length-1][0][1]===a[g][3]){d[d.length-1].unshift([a[g][0],a[g][1]]),.5===a[g][0]||.5===a[g][1]||.5===a[g][2]||.5===a[g][3]||a[g][0]===c||a[g][1]===b||a[g][2]===c||a[g][3]===b?e[e.length-1].unshift([a[g][0],a[g][1]]):e[e.length-1].unshift(j([a[g][0],a[g][1]],[a[g][2],a[g][3]])),a.splice(g,1),f=!1;break}}f&&d[d.length-1][0][0]===d[d.length-1][d[d.length-1].length-1][0]&&d[d.length-1][0][1]===d[d.length-1][d[d.length-1].length-1][1]&&e[e.length-1].push([e[e.length-1][0][0],e[e.length-1][0][1]])}return d[d.length-1][0][0]===d[d.length-1][d[d.length-1].length-1][0]&&d[d.length-1][0][1]===d[d.length-1][d[d.length-1].length-1][1]&&e[e.length-1].push([e[e.length-1][0][0],e[e.length-1][0][1]]),e}function m(f,g,h,k,l){function m(a,b){if(0!==a&&0!==b&&b!==f[a].length-k-3&&a!==f.length-l-3)return 0;return 0===a&&0!==b&&b!==f[a].length-k-3?"c":0!==a&&b===f[a].length-k-3&&a!==f.length-l-3?"b":a===f.length-l-3&&0!==b&&b!==f[a].length-k-3?"a":0!==a&&0===b&&a!==f.length-l-3?"d":0===a&&b===f[a].length-k-3?"bc":a===f.length-l-3&&b===f[a].length-k-3?"ab":a===f.length-l-3&&0===b?"ad":0===a&&0===b?"cd":void 0}function n(a,b,d,c){return"a"===c?[a+1+D(f[a+2][b],f[a][b],d),b+.5,a+2.5,b+1+D(f[a+2][b+2],f[a+2][b],d)]:"b"===c?[a+2.5,b+1+D(f[a+2][b+2],f[a+2][b],d),a+1+D(f[a+2][b+2],f[a][b+2],d),b+2.5]:"c"===c?[a+1+D(f[a+2][b+2],f[a][b+2],d),b+2.5,a+.5,b+1+D(f[a][b+2],f[a][b],d)]:"d"===c?[a+1+D(f[a+2][b],f[a][b],d),b+.5,a+.5,b+1+D(f[a][b+2],f[a][b],d)]:"v"===c?[a+2.5,b+1+D(f[a+2][b+2],f[a+2][b],d),a+.5,b+1+D(f[a][b+2],f[a][b],d)]:"h"===c?[a+1+D(f[a+2][b],f[a][b],d),b+.5,a+1+D(f[a+2][b+2],f[a][b+2],d),b+2.5]:void 0}function o(a,b,d,c){return"t_l"===c?[a+2.5,b+.5,a+2.5,b+1+D(f[a+2][b+2],f[a+2][b],d)]:"t_r"===c?[a+2.5,b+2.5,a+2.5,b+1+D(f[a+2][b+2],f[a+2][b],d)]:"r_t"===c?[a+2.5,b+2.5,a+1+D(f[a+2][b+2],f[a][b+2],d),b+2.5]:"r_b"===c?[a+.5,b+2.5,a+1+D(f[a+2][b+2],f[a][b+2],d),b+2.5]:"b_l"===c?[a+.5,b+.5,a+.5,b+1+D(f[a][b+2],f[a][b],d)]:"b_r"===c?[a+.5,b+2.5,a+.5,b+1+D(f[a][b+2],f[a][b],d)]:"l_t"===c?[a+2.5,b+.5,a+1+D(f[a+2][b],f[a][b],d),b+.5]:"l_b"===c?[a+.5,b+.5,a+1+D(f[a+2][b],f[a][b],d),b+.5]:void 0}function p(a,b,c,d,e){if("t_c"===e)return[a+2.5,b+1+D(f[a+2][b+2],f[a+2][b],c),a+2.5,b+1+D(f[a+2][b+2],f[a+2][b],d)];return"b_c"===e?[a+.5,b+1+D(f[a][b+2],f[a][b],c),a+.5,b+1+D(f[a][b+2],f[a][b],d)]:void 0}function q(a,b,c,d,e){if("r_c"===e)return[a+1+D(f[a+2][b+2],f[a][b+2],c),b+2.5,a+1+D(f[a+2][b+2],f[a+2][b],d),b+2.5];return"l_c"===e?[a+1+D(f[a][b+2],f[a][b+2],c),b+.5,a+1+D(f[a][b+2],f[a][b],d),b+.5]:void 0}function r(a,b,c){"0000"!==a&&"1111"!==a&&"2222"!==a&&("2221"===a||"1112"===a?C.push(n(b,c,h,"d")):"0001"===a||"1110"===a?C.push(n(b,c,g,"d")):"2212"===a||"1121"===a?C.push(n(b,c,h,"c")):"0010"===a||"1101"===a?C.push(n(b,c,g,"c")):"2122"===a||"1211"===a?C.push(n(b,c,h,"b")):"0100"===a||"1011"===a?C.push(n(b,c,g,"b")):"1222"===a||"2111"===a?C.push(n(b,c,h,"a")):"1000"===a||"0111"===a?C.push(n(b,c,g,"a")):"0011"===a||"1100"===a?C.push(n(b,c,g,"h")):"2211"===a||"1122"===a?C.push(n(b,c,h,"h")):"0110"===a||"1001"===a?C.push(n(b,c,g,"v")):"2112"===a||"1221"===a?C.push(n(b,c,h,"v")):"2200"===a||"0022"===a?C.push(n(b,c,h,"h"),n(b,c,g,"h")):"2002"===a||"0220"===a?C.push(n(b,c,h,"v"),n(b,c,g,"v")):"2220"===a||"0002"===a?C.push(n(b,c,h,"d"),n(b,c,g,"d")):"2202"===a||"0020"===a?C.push(n(b,c,h,"c"),n(b,c,g,"c")):"2022"===a||"0200"===a?C.push(n(b,c,h,"b"),n(b,c,g,"b")):"0222"===a||"2000"===a?C.push(n(b,c,h,"a"),n(b,c,g,"a")):"1200"===a?C.push(n(b,c,h,"b"),n(b,c,g,"h")):"0120"===a?C.push(n(b,c,h,"c"),n(b,c,g,"v")):"0012"===a?C.push(n(b,c,h,"d"),n(b,c,g,"h")):"2001"===a?C.push(n(b,c,h,"a"),n(b,c,g,"v")):"1022"===a?C.push(n(b,c,g,"b"),n(b,c,h,"h")):"2102"===a?C.push(n(b,c,g,"c"),n(b,c,h,"v")):"2210"===a?C.push(n(b,c,g,"d"),n(b,c,h,"h")):"0221"===a?C.push(n(b,c,g,"a"),n(b,c,h,"v")):"1002"===a?C.push(n(b,c,h,"d"),n(b,c,g,"v")):"2100"===a?C.push(n(b,c,h,"a"),n(b,c,g,"h")):"0210"===a?C.push(n(b,c,h,"b"),n(b,c,g,"v")):"0021"===a?C.push(n(b,c,h,"c"),n(b,c,g,"h")):"1220"===a?C.push(n(b,c,g,"d"),n(b,c,h,"v")):"0122"===a?C.push(n(b,c,g,"a"),n(b,c,h,"h")):"2012"===a?C.push(n(b,c,g,"b"),n(b,c,h,"v")):"2201"===a?C.push(n(b,c,g,"c"),n(b,c,h,"h")):"0211"===a?C.push(n(b,c,g,"a"),n(b,c,h,"b")):"2110"===a?C.push(n(b,c,h,"a"),n(b,c,g,"d")):"1102"===a?C.push(n(b,c,g,"c"),n(b,c,h,"d")):"1021"===a?C.push(n(b,c,g,"b"),n(b,c,h,"c")):"2011"===a?C.push(n(b,c,h,"a"),n(b,c,g,"b")):"0112"===a?C.push(n(b,c,g,"a"),n(b,c,h,"d")):"1120"===a?C.push(n(b,c,h,"c"),n(b,c,g,"d")):"1201"===a?C.push(n(b,c,h,"b"),n(b,c,g,"c")):"2101"===a?C.push(n(b,c,h,"a"),n(b,c,g,"c")):"0121"===a?C.push(n(b,c,g,"a"),n(b,c,h,"c")):"1012"===a?C.push(n(b,c,g,"b"),n(b,c,h,"d")):"1210"===a?C.push(n(b,c,h,"b"),n(b,c,g,"d")):"2020"===a?0===A?C.push(n(b,c,h,"a"),n(b,c,g,"a"),n(b,c,h,"c"),n(b,c,g,"c")):1===A?C.push(n(b,c,h,"a"),n(b,c,g,"b"),n(b,c,h,"c"),n(b,c,g,"d")):2==A&&C.push(n(b,c,h,"b"),n(b,c,g,"b"),n(b,c,h,"d"),n(b,c,g,"d")):"0202"===a?0===A?C.push(n(b,c,h,"b"),n(b,c,g,"b"),n(b,c,h,"d"),n(b,c,g,"d")):1===A?C.push(n(b,c,g,"a"),n(b,c,h,"b"),n(b,c,g,"c"),n(b,c,h,"d")):2==A&&C.push(n(b,c,h,"a"),n(b,c,g,"a"),n(b,c,h,"c"),n(b,c,g,"c")):"0101"===a?0===A?C.push(n(b,c,g,"b"),n(b,c,g,"d")):1==A&&C.push(n(b,c,g,"a"),n(b,c,g,"c")):"1010"===a?0===A?C.push(n(b,c,g,"a"),n(b,c,g,"c")):1==A&&C.push(n(b,c,g,"b"),n(b,c,g,"d")):"2121"===a?1===A?C.push(n(b,c,h,"a"),n(b,c,h,"c")):2==A&&C.push(n(b,c,h,"b"),n(b,c,h,"d")):"1212"===a?1===A?C.push(n(b,c,h,"b"),n(b,c,h,"d")):2==A&&C.push(n(b,c,h,"a"),n(b,c,h,"c")):"2120"===a?1===A?C.push(n(b,c,h,"a"),n(b,c,h,"c"),n(b,c,g,"d")):2==A&&C.push(n(b,c,h,"b"),n(b,c,h,"d"),n(b,c,g,"d")):"2021"===a?1===A?C.push(n(b,c,h,"a"),n(b,c,g,"b"),n(b,c,h,"c")):2==A&&C.push(n(b,c,h,"b"),n(b,c,g,"b"),n(b,c,h,"d")):"1202"===a?1===A?C.push(n(b,c,h,"b"),n(b,c,g,"c"),n(b,c,h,"d")):2==A&&C.push(n(b,c,h,"a"),n(b,c,h,"c"),n(b,c,g,"c")):"0212"===a?1===A?C.push(n(b,c,g,"a"),n(b,c,h,"b"),n(b,c,h,"d")):2==A&&C.push(n(b,c,h,"a"),n(b,c,g,"a"),n(b,c,h,"c")):"0102"===a?0===A?C.push(n(b,c,g,"b"),n(b,c,h,"d"),n(b,c,g,"d")):1==A&&C.push(n(b,c,g,"a"),n(b,c,g,"c"),n(b,c,h,"d")):"0201"===a?0===A?C.push(n(b,c,h,"b"),n(b,c,g,"b"),n(b,c,g,"d")):1==A&&C.push(n(b,c,g,"a"),n(b,c,h,"b"),n(b,c,g,"c")):"1020"===a?0===A?C.push(n(b,c,g,"a"),n(b,c,h,"c"),n(b,c,g,"c")):1==A&&C.push(n(b,c,g,"b"),n(b,c,h,"c"),n(b,c,g,"d")):"2010"===a?0===A?C.push(n(b,c,h,"a"),n(b,c,g,"a"),n(b,c,g,"c")):1==A&&C.push(n(b,c,h,"a"),n(b,c,g,"c"),n(b,c,g,"d")):void 0)}function s(a,b,c){"01"===a?C.push(o(b,c,g,"t_r")):"02"===a?C.push(p(b,c,g,h,"t_c")):"10"===a?C.push(o(b,c,g,"t_l")):"11"===a?C.push([b+2.5,c+.5,b+2.5,c+2.5]):"12"===a?C.push(o(b,c,h,"t_l")):"20"===a?C.push(p(b,c,h,g,"t_c")):"21"===a?C.push(o(b,c,h,"t_r")):void 0}function t(a,b,c){"01"===a?C.push(o(b,c,g,"r_b")):"02"===a?C.push(q(b,c,g,h,"r_c")):"10"===a?C.push(o(b,c,g,"r_t")):"11"===a?C.push([b+.5,c+2.5,b+2.5,c+2.5]):"12"===a?C.push(o(b,c,h,"r_t")):"20"===a?C.push(q(b,c,h,g,"r_c")):"21"===a?C.push(o(b,c,h,"r_b")):void 0}function u(a,b,c){"01"===a?C.push(o(b,c,g,"b_l")):"02"===a?C.push(p(b,c,g,h,"b_c")):"10"===a?C.push(o(b,c,g,"b_r")):"11"===a?C.push([b+.5,c+.5,b+.5,c+2.5]):"12"===a?C.push(o(b,c,h,"b_r")):"20"===a?C.push(p(b,c,h,g,"b_c")):"21"===a?C.push(o(b,c,h,"b_l")):void 0}function v(a,b,c){"01"===a?C.push(o(b,c,g,"l_t")):"02"===a?C.push(q(b,c,g,h,"l_c")):"10"===a?C.push(o(b,c,g,"l_b")):"11"===a?C.push([b+.5,c+.5,b+2.5,c+.5]):"12"===a?C.push(o(b,c,h,"l_b")):"20"===a?C.push(q(b,c,h,g,"l_c")):"21"===a?C.push(o(b,c,h,"l_t")):void 0}for(var w,x,y,z,A,B,C=[],D=function(a,b,d){return(d-b)/(a-b)},E=0,F=f.length-l-2;E<F;E+=2)for(var G=0,H=f[E].length-k-2;G<H;G+=2)w=f[E+2][G]<g?"0":f[E+2][G]>=g&&f[E+2][G]<h?"1":f[E+2][G]>=h?"2":NaN,x=f[E+2][G+2]<g?"0":f[E+2][G+2]>=g&&f[E+2][G+2]<h?"1":f[E+2][G+2]>=h?"2":NaN,y=f[E][G+2]<g?"0":f[E][G+2]>=g&&f[E][G+2]<h?"1":f[E][G+2]>=h?"2":NaN,z=f[E][G]<g?"0":f[E][G]>=g&&f[E][G]<h?"1":f[E][G]>=h?"2":NaN,A=f[E+1][G+1]<g?0:f[E+1][G+1]>=g&&f[E+1][G+1]<h?1:f[E+1][G+1]>=h?2:NaN,r(w+x+y+z,E,G),B=m(E,G),0!==B&&("a"===B?s(w+x,E,G):"b"===B?t(x+y,E,G):"c"===B?u(y+z,E,G):"d"===B?v(z+w,E,G):"ab"===B?(s(w+x,E,G),t(x+y,E,G)):"bc"===B?(t(x+y,E,G),u(y+z,E,G)):"cd"===B?(u(y+z,E,G),v(z+w,E,G)):"ad"===B?(s(w+x,E,G),v(z+w,E,G)):void 0);return C}function n(a,b,d){for(var e=d.length,f=e-1,g=!1,h=0;h<e;h++)(d[h][0]<=b&&b<d[f][0]||d[f][0]<=b&&b<d[h][0])&&a>(d[f][1]-d[h][1])*(b-d[h][0])/(d[f][0]-d[h][0])+d[h][1]&&(g=!g),f=h;return g}function o(a){var b=f(a);b.sort(function(c,a){return c.length-a.length}).reverse();for(var c,d={},e=0;e<b.length;e++){c=[];for(var g=0;g<b.length;g++)e!==g&&n(b[e][0][1],b[e][0][0],b[g])&&c.push(g);d[[e]]=c}for(var h,k=[],l=0;l<b.length;l++){for(var m in h=[],d)d[m][d[m].length-1]===l&&0==(d[m].length-1)%2&&h.push(b[m]);0!=(d[[l]].length-1)%2&&k.push([b[l]].concat(h))}return k}function p(a,b,c){function d(a,b,c){for(var d=c.toString().includes(".")?c.toString().split(".").pop().length:0,e=[],f=a;f>=b;)e.push(f),f-=c,f=parseFloat(f.toFixed(d));return e}switch(a.type){case"CustomValues":return a.values;case"Range":return d(a.max,a.min,a.step);case"FullRange":return d(b,c,a.step);}}function q(a,b,c,d,e,f,g,h){var n=0==a[0].length%2?1:0,q=0==a.length%2?1:0,r={type:"FeatureCollection",features:[]},s=[],t=[],u=p(b,g,h),v=u[0],w=1/0;s.push(l(m(a,v,w,n,q),a[0].length-.5,a.length-.5)),t.push("more than "+u[0]);for(var x=0;x<u.length-1;x++)v=u[x+1],w=u[x],s.push(l(m(a,v,w,n,q),a[0].length-.5,a.length-.5)),t.push(w);v=-Infinity,w=u[u.length-1],s.push(l(m(a,v,w,n,q),a[0].length-.5,a.length-.5)),t.push("less than "+u[u.length-1]);for(var y=[],z=1/0,A=-Infinity,B=1/0,C=-Infinity,D=[],E=0;E<s.length;E++){y.push([]);for(var F=0;F<s[E].length;F++){y[E].push([]);for(var G=0;G<s[E][F].length;G++){if(0<G&&G<s[E][F].length-1&&(s[E][F][G][0]===s[E][F][G+1][0]&&s[E][F][G][0]===s[E][F][G-1][0]||s[E][F][G][1]===s[E][F][G+1][1]&&s[E][F][G][1]===s[E][F][G-1][1])){s[E][F][G][0]<z&&(z=s[E][F][G][0]),s[E][F][G][0]>A&&(A=s[E][F][G][0]),s[E][F][G][1]<B&&(B=s[E][F][G][1]),s[E][F][G][1]>C&&(C=s[E][F][G][1]);continue}y[E][F].push([s[E][F][G][1]*d+f,s[E][F][G][0]*c+e])}}}for(var H=0;H<y.length;H++)D.push([]);for(var I=0;I<y.length;I++)r.features.push({type:"Feature",properties:{value:t[I]},geometry:{type:"MultiPolygon",coordinates:o(y[I])}});return{GeoJson:r,chache:D}}function r(a,d,e){var g=A.apply(Math,f(a.map(function(a){return a[0]}))),h=z.apply(null,a.map(function(a){return a[0]})),i=A.apply(null,a.map(function(a){return a[1]})),j=z.apply(null,a.map(function(a){return a[1]})),k=A.apply(null,a.map(function(a){return a[2]})),l=z.apply(null,a.map(function(a){return a[2]})),m=j-i,n=h-g,o=m*(100+e)/100,p=n*(100+e)/100,q=i-(o-m)/2,r=g-(p-n)/2,s=j+(o-m)/2,t=h+(p-n)/2,u=b([r,q],[r,s],d,"Long"),v=b([r,q],[t,q],d,"Lat"),w=y(o/u),x=y(p/v),B=c(a,x,w,v,u,r,q);return{Grid:B,DeltaLat:v,DeltaLong:u,Grid_Min_Lat:r,Grid_Min_Long:q,Grid_Max_Lat:t,Grid_Max_Long:s,Dot_Max_Z:l,Dot_Min_Z:k}}function s(f,g,h,k){function l(a,b,d,c){return"a"===c?[a+1+t(f[a+2][b],f[a][b],d),b+.5,a+2.5,b+1+t(f[a+2][b+2],f[a+2][b],d)]:"b"===c?[a+2.5,b+1+t(f[a+2][b+2],f[a+2][b],d),a+1+t(f[a+2][b+2],f[a][b+2],d),b+2.5]:"c"===c?[a+1+t(f[a+2][b+2],f[a][b+2],d),b+2.5,a+.5,b+1+t(f[a][b+2],f[a][b],d)]:"d"===c?[a+1+t(f[a+2][b],f[a][b],d),b+.5,a+.5,b+1+t(f[a][b+2],f[a][b],d)]:"v"===c?[a+2.5,b+1+t(f[a+2][b+2],f[a+2][b],d),a+.5,b+1+t(f[a][b+2],f[a][b],d)]:"h"===c?[a+1+t(f[a+2][b],f[a][b],d),b+.5,a+1+t(f[a+2][b+2],f[a][b+2],d),b+2.5]:void 0}function m(a,b,c){"0000"!==a&&"1111"!==a&&("1110"===a||"0001"===a?s.push(l(b,c,g,"d")):"1101"===a||"0010"===a?s.push(l(b,c,g,"c")):"1011"===a||"0100"===a?s.push(l(b,c,g,"b")):"0111"===a||"1000"===a?s.push(l(b,c,g,"a")):"1100"===a||"0011"===a?s.push(l(b,c,g,"h")):"1001"===a||"0110"===a?s.push(l(b,c,g,"v")):"1010"===a?0===r?s.push(l(b,c,g,"a"),l(b,c,g,"c")):1==r&&s.push(l(b,c,g,"b"),l(b,c,g,"d")):"0101"===a?0===r?s.push(l(b,c,g,"b"),l(b,c,g,"d")):1==r&&s.push(l(b,c,g,"a"),l(b,c,g,"c")):void 0)}for(var n,o,p,q,r,s=[],t=function(a,b,d){return G(b-d)/(G(b-d)+G(d-a))},u=0,v=f.length-k-2;u<v;u+=2)for(var w=0,x=f[u].length-h-2;w<x;w+=2)n=f[u+2][w]<=g?"0":"1",o=f[u+2][w+2]<=g?"0":"1",p=f[u][w+2]<=g?"0":"1",q=f[u][w]<=g?"0":"1",r=f[u+1][w+1]<=g?0:1,m(n+o+p+q,u,w);return s}function t(a,b,c,d,e,f,g,m){for(var n,o=[],q=[],r=0==a[0].length%2?1:0,t=0==a.length%2?1:0,u={type:"FeatureCollection",features:[]},v=p(b,g,m),w=0;w<v.length;w++)n=v[w],console.log("----"+n+"----"),o.push(l(s(a,n,r,t))),q.push(n);for(var x,y=0;y<o.length;y++)for(var z=0;z<o[y].length;z++){for(var A=0;A<o[y][z].length;A++)x=o[y][z][A][0]*c+e,o[y][z][A][0]=o[y][z][A][1]*d+f,o[y][z][A][1]=x;u.features.push({type:"Feature",properties:{value:q[y]},geometry:{type:"LineString",coordinates:o[y][z]}})}return u}function u(a,b){var c=function(a){return a.map(function(a){return a*H/180})},d=c(a),e=c(b);return 6372795*D(F(d[0])*F(e[0])+E(d[0])*E(e[0])*E(d[1]-e[1]))}function v(a,b,c){function d(a){var b=y(a);return b%2?b:C(a)}if("meters"===c){var e=[a[3],a[0]],g=[a[1],a[0]],h=u(g,e),i=d(h/b),j=G(a[1]-a[3])*b/h,k=[a[1],a[0]],l=[a[1],a[2]],m=u(l,k),n=d(m/b),o=G(a[0]-a[2])*b/m;return{latSize:i,longSize:n,degreeLatCellSize:j,degreeLongCellSize:o}}if("degrees"===c){var p;if(!Array.isArray(b))p=[b,b];else if(1===b.length)p=[b[0],b[0]];else if(2===b.length)p=f(b);else throw new Error("\u0442\u0430\u043A \u043D\u0435 \u043C\u043E\u0436\u0435\u0442 \u0431\u044B\u0442\u044C");var q=G(a[1]-a[3]),r=d(q/p[0]),s=G(a[0]-a[2]),t=d(s/p[1]);return{latSize:r,longSize:t,degreeLatCellSize:p[0],degreeLongCellSize:p[1]}}throw new Error("wtf")}function w(a,b){var c=a.bbox,d=a.units,f=a.exponent;switch(e(c)){case"undefined":c=x([0,0],b);break;case"object":if(!Array.isArray(c))throw new Error("bbox \u043D\u0435 \u044F\u0432\u043B\u044F\u0435\u0442\u0441\u044F \u043C\u0430\u0441\u0441\u0438\u0432\u043E\u043C");if(0===c.length)c=x([0,0],b);else if(2===c.length)c.forEach(function(a){if("number"!=typeof a||0>a)throw new Error("\u041D\u0435\u043A\u043A\u043E\u0440\u0435\u043A\u0442\u043D\u044B\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u044F bbox")}),c=x(c,b);else if(4===c.length)c.forEach(function(a){if("number"!=typeof a)throw new Error("\u041D\u0435\u043A\u043A\u043E\u0440\u0435\u043A\u0442\u043D\u044B\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u044F bbox")});else throw new Error("\u041D\u0435\u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u043E\u0435 \u043A\u043E\u043B-\u0432\u043E \u044D\u043B\u0435\u043C\u0435\u043D\u0442\u043E\u0432 \u043C\u0430\u0441\u0441\u0438\u0432\u0430 bbox");break;default:throw new Error("bbox \u043D\u0435 \u044F\u0432\u043B\u044F\u0435\u0442\u0441\u044F \u043C\u0430\u0441\u0441\u0438\u0432\u043E\u043C");}switch(e(d)){case"string":case"undefined":if("meters"===d||d===void 0)d=["meters","meters"];else if("degrees"===d)d=["degrees","degrees"];else throw new Error("\u041D\u0435\u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u044B\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u044F units");break;case"object":if(!Array.isArray(d))throw new Error("units \u043D\u0435 \u044F\u0432\u043B\u044F\u0435\u0442\u0441\u044F \u043C\u0430\u0441\u0441\u0438\u0432\u043E\u043C");if(2===d.length)d.forEach(function(a){if("meters"!==a&&"degrees"!==a)throw new Error("\u041D\u0435\u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u044B\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u044F units")});else throw new Error("\u041D\u0435\u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u043E\u0435 \u043A\u043E\u043B-\u0432\u043E \u044D\u043B\u0435\u043C\u0435\u043D\u0442\u043E\u0432 \u043C\u0430\u0441\u0441\u0438\u0432\u0430 units");break;default:throw new Error("\u041D\u0435\u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u044B\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u044F units");}if(f===void 0)f=2;else if("number"!=typeof f||0>=f)throw new Error("\u041D\u0435\u043A\u043A\u043E\u0440\u0435\u043A\u0442\u043D\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 exponent");return{bbox:c,units:d,exponent:f}}function x(a,b){if(!Array.isArray(a))throw new Error("percents \u043D\u0435 \u041C\u0430\u0441\u0441\u0438\u0432");var c=A.apply(Math,f(b.map(function(a){return a[0]}))),d=A.apply(Math,f(b.map(function(a){return a[1]}))),e=z.apply(Math,f(b.map(function(a){return a[0]}))),g=z.apply(Math,f(b.map(function(a){return a[1]}))),h=g-d,i=e-c,j=h*(100+a[0])/100,k=i*(100+a[1])/100;return[d-(j-h)/2,c-(k-i)/2,g+(j-h)/2,e+(k-i)/2]}a.DrawGridWithExtrs=d,a.DrawIsobandsWithCustomGrid=function(a,b,c,d,e,f,g,h){return q(a,b,c,d,e,f,h,g)},a.DrawIsobandsWithExtrs=function(a,b,c,e){var f=d(a,e,c);return q(f.Grid,b,f.DeltaLat,f.DeltaLong,f.Grid_Min_Lat,f.Grid_Min_Long,f.Dot_Max_Z,f.Dot_Min_Z)},a.DrawIsobandsWithoutExtrs=function(a,b,c,d){var e=r(a,c,d),f=q(e.Grid,b,e.DeltaLat,e.DeltaLong,e.Grid_Min_Lat,e.Grid_Min_Long,e.Dot_Max_Z,e.Dot_Min_Z);return f},a.DrawIsolinesWitchCustomGrid=function(a,b,c,d,e,f,g,h){return t(a,b,c,d,e,f,h,g)},a.DrawIsolinesWithExtrs=function(a,b,c,e){var f=d(a,e,c);return t(f.Grid,b,f.DeltaLat,f.DeltaLong,f.Grid_Min_Lat,f.Grid_Min_Long,f.Dot_Max_Z,f.Dot_Min_Z)},a.DrawIsolinesWithoutExtrs=function(a,b,c,d){var e=r(a,c,d);return t(e.Grid,b,e.DeltaLat,e.DeltaLong,e.Grid_Min_Lat,e.Grid_Min_Long,e.Dot_Max_Z,e.Dot_Min_Z)},a.IDW=function(a,b){var c,d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{},e=w(d,a),f=e.bbox,g=e.units,h=e.exponent,i=v(f,b,g[0]),k=i.latSize,l=i.longSize,m=i.degreeLatCellSize,n=i.degreeLongCellSize;if("degrees"===g[1])c=function(){for(var b=a.map(function(a){return[G(f[1]-a[0])/m,G(f[0]-a[1])/n,a[2]]}),c=[],d=0;d<k;d++){c[d]=[];for(var e=function(a){var e=[d+.5,a+.5],f=0,g=0;b.forEach(function(a){var b=B(B(e[0]-a[0],2)+B(e[1]-a[1],2),2);f+=a[2]/B(b,h),g+=1/B(b,h)}),c[d][a]=f/g},g=0;g<l;g++)e(g)}return c}();else if("meters"===g[1])c=function(){for(var b,c=[],d=0;d<k;d++){c[d]=[],b=0==d%2?0:1;for(var e=function(b){var e=[f[1]+(d+.5)*m,f[0]+(b+.5)*n],g=0,i=0;a.forEach(function(a){var b=u(a,e);g+=a[2]/B(b,h),i+=1/B(b,h)}),c[d][b]=g/i},g=b;g<l;g+=2)e(g)}return c}();else throw new Error("\u043A\u0430\u043A \u0442\u0430\u043A\u043E\u0435 \u0432\u043E\u043E\u0431\u0449\u0435 \u0432\u043E\u0437\u043C\u043E\u0436\u043D\u043E?");return{grid:c,latSize:k,longSize:l,degreeLatCellSize:m,degreeLongCellSize:n,bbox:f}},a.bezier=function(a){var b=[],c=[],d=!0;(a[0][0]!==a[a.length-1][0]||a[0][1]!==a[a.length-1][1])&&(d=!1);for(var e=0;e<a.length;e++){var f=void 0,g=void 0;if(0==e)d?(f=a[e+1],g=a[a.length-2]):(f=a[e+1],g=a[e]);else if(!(e===a.length-1))f=a[e+1],g=a[e-1];else if(d){b.push([b[0][0],b[0][1]]);break}else f=a[e],g=a[e-1];var h=[(f[0]-g[0])/2,(f[1]-g[1])/2],j=[a[e][0]-h[0]/3,a[e][1]-h[1]/3],k=[a[e][0]+h[0]/3,a[e][1]+h[1]/3];b.push([j,k])}for(var l=[],m=0;m<a.length-1;m++){l.push([a[m],b[m][1],b[m+1][0],a[m+1]]);for(var n=0;1>n;n+=.1){var o=B(1-n,3)*a[m][0]+3*B(1-n,2)*n*b[m][1][0]+3*(1-n)*B(n,2)*b[m+1][0][0]+B(n,3)*a[m+1][0],p=B(1-n,3)*a[m][1]+3*B(1-n,2)*n*b[m][1][1]+3*(1-n)*B(n,2)*b[m+1][0][1]+B(n,3)*a[m+1][1];c.push([o,p])}}return c},a.cellSizes=v,Object.defineProperty(a,"__esModule",{value:!0})});
